{% extends 'master/base.html' %}

{% block title %}  
  {% if request.resolver_match.url_name == 'update_user' %}
  Edit User
  {% else %}  
  Register User
  {% endif %} 
{% endblock title %}

{% block dashboard_title1 %} 
  {% if request.resolver_match.url_name == 'update_user' %}
    Edit User
  {% else %}  
    Register User
  {% endif %} 
{% endblock dashboard_title1 %}

{% block dashboard_title2 %} 
  {% if request.resolver_match.url_name == 'update_user' %}
    System Users / Edit
  {% else %}  
    System Users / Add
  {% endif %} 
{% endblock dashboard_title2 %}

{% block content %}

        {% if messages %}

            {% for message in messages %}
                <div class="alert alert-{% if message.tags == 'error' %}{{ 'danger' }}{% else %}{{ message.tags }}{% endif %}" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    {{message}}
                </div>
            {% endfor %}
        
        {% endif %}

        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        {% load crispy_forms_tags %}

                        <form action="" method="POST" class="form-group" enctype="multipart/form-data">
                            {% csrf_token %}
                              {{ form|crispy }}

                              {% if request.resolver_match.url_name == 'update_user' %}
                                <button type="submit" class="btn btn-success">Update User</button>
                              {% else %}  
                                <button type="submit" class="btn btn-success">Register User</button>
                              {% endif %}  
                          </form>
                    </div>
                </div>
            </div>
           
        </div>


{% endblock content %}

{% block script %}
<script>
        $(function () {
          $('#usersTable').DataTable({
            "paging": true,
            "lengthChange": true,
            "searching": true,
            "ordering": true,
            "info": true,
            "autoWidth": true,
          });
        });
      </script>
{% endblock script %}